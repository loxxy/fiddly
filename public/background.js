!function(){"use strict";function t(t,e,a){chrome.tabs.getSelected(null,function(n){chrome.tabs.sendMessage(n.id,{method:t,data:e},a)})}function e(t,e,a,n,i){var o=$("<canvas>").attr({width:n,height:i});return o[0].getContext("2d").drawImage(t[0],-e,-a),o[0].toDataURL("image/png")}function a(a,n){chrome.tabs.captureVisibleTab(chrome.windows.WINDOW_ID_CURRENT,function(n){n=e($("<img>").attr("src",n),a.x,a.y,a.w,a.h),t(o.loadCapture,{image:n},function(){})}),n("Capture Started")}function n(t){var e={path:t?"icon_active.png":"icon.png"};chrome.browserAction.setIcon(e,function(){})}function i(t,e,i){switch(t.method){case o.capture:a(t.data,i);break;case o.updateState:n(t.data)}i&&i(t)}var o={init:"init",initVidState:"initVidState",clearall:"clearall",capture:"capture",loadCapture:"loadCapture",toggleState:"toggleState",toggleVidState:"toggleVidState",updateState:"updateState"};chrome.runtime.onMessage.addListener(i),chrome.commands.onCommand.addListener(function(e){t(e,null,function(){})})}();